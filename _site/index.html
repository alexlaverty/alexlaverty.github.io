<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alex Laverty</title>
  <!-- <link rel="stylesheet" href="/assets/css/main.css"> -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Alex Laverty | Code, Science, Philosophy, Humor</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Alex Laverty" />
<meta name="author" content="Alex Laverty" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Alex Laverty" />
<meta property="og:type" content="website" />
<link rel="next" href="http://localhost:4000/blog/page2/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Alex Laverty" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","author":{"@type":"Person","name":"Alex Laverty"},"description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Alex Laverty","name":"Alex Laverty","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->


  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f9f9f9;
    }

    a {
      color: #0066cc;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .header {
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 15px 0;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .footer {
      background-color: #333;
      color: #fff;
      padding: 30px 0;
      margin-top: 50px;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      text-align: center;
    }

    .footer a {
      color: #ccc;
    }

    .footer a:hover {
      color: #fff;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .main-content,
      .sidebar {
        flex: 0 0 100%;
        max-width: 100%;
      }

      .main-content {
        padding-right: 0;
        margin-bottom: 30px;
      }

      .sidebar {
        padding-left: 0;
        border-left: none;
        border-top: 1px solid #eee;
        padding-top: 20px;
      }
    }
    .container {
    display: flex;
    flex-wrap: wrap;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  .main-content {
    flex: 0 0 80%;
    max-width: 80%;
    padding-left: 20px;
    padding-right: 20px;
    box-sizing: border-box;
  }

  .sidebar {
    flex: 0 0 20%;
    max-width: 20%;
    position: sticky;
    top: 20px;
    right: 0;
    padding-left: 20px;
    box-sizing: border-box;
    border-left: 1px solid #eee;
  }

 .sidebar hr {
  margin: 10px 0;
 }
 .sidebar h2 {
  font-size: 1.2rem;
 }
  .site-title {
    margin-top: 0;
    font-size: 24px;
  }
  .sidebar li {
    text-transform:capitalize;
    font-size: 1rem;
    font-weight: 100;
  }


  .profile-image img {
    max-width: 100%;
    border-radius: 5%;
    margin-bottom: 0px;
  }

  .site-nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .site-nav li {
    margin-bottom: 10px;
  }

  .site-nav a {
    text-decoration: none;
    color: #333;

  }
  .site-nav h2 {
    text-decoration: none;
    color: #333;
    font-weight: bold;
  }
  .site-nav a:hover {
    color: #007bff;
  }

  .post {
    margin-bottom: 30px;
  }

  .post-title {
    margin-bottom: 5px;
  }

  .post-content img {
    max-width: 100%;
    margin-top: 15px;
  }

  .post-date {
    color: #666;
    font-style: italic;
    margin-top: 15px;
    margin-bottom: 5px;
  }

  hr {
    margin: 30px 0;
    border: none;
    border-top: 1px solid #eee;
  }
  .youtube-wrapper {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
    margin-top: 15px;
    margin-bottom: 15px;}

.youtube-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.category-title {
  text-transform:capitalize;
  }


  .pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  padding: 15px;
  margin-top: 20px;
}

.pagination-button {
  display: inline-block;
  padding: 8px 15px;
  font-size: 16px;
  font-weight: bold;
  color: white;
  background-color: #007bff;
  border-radius: 5px;
  text-decoration: none;
  transition: all 0.3s ease-in-out;
}

.pagination-button:hover {
  background-color: #0056b3;
}

.pagination-info {
  font-size: 16px;
  font-weight: bold;
  color: #333;
}

.pagination-button.disabled {
  background-color: #ccc;
  color: #666;
  cursor: not-allowed;
}


.search-container {
    padding: 0rem;
    margin-bottom: 10px;
}

#search-input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

#search-results {
    list-style: none;
    padding: 0;
    margin-top: 0rem;
}

#search-results li {
    padding: 8px;
    border-bottom: 1px solid #eee;
}
.social-icons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 0px;
    margin-bottom: 10px;
}

.social-icons a {
    background: #f0f0f0;
    color: #333;
    width: 35px;
    height: 35px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.social-icons a:hover {
    transform: translateY(-3px);
}

.social-icons a.youtube:hover {
    background: #FF0000;
    color: white;
}

.social-icons a.linkedin:hover {
    background: #0077B5;
    color: white;
}

.social-icons a.github:hover {
    background: #333;
    color: white;
}
  </style>
</head>
<body>
  <!-- <header class="header">
    <div class="header-container">
      <h2><a href="/" class="header-logo">Alex Laverty</a></h2>
    </div>
  </header> -->

  <main role="main">
    <div class="container">
  <div class="main-content">
    
      <article class="post">
        <h2 class="post-title"><a class="nice-title" href="/optimising-nutrition/optimising-nutrition-with-genetic-algorithms">Optimising Nutrition with Genetic Algorithms</a></h2>
        <p class="post-date">February 22, 2025</p>
        <div class="post-content">
          <div style="width: 100%; height: 250px; overflow: hidden; margin-bottom: 20px;">
    <img src="/images/2025-03-09/optimised-nutrition-2.jpg" style="width: 100%; height: 250px; object-fit: cover; object-position: center;" />
</div>
<p>Have you ever wondered how to create the perfect meal plan that hits all your nutritional needs? I created a program that uses artificial intelligence to solve this puzzle, and I wanted to share how it works in simple terms.</p>

<h2 id="what-does-it-do">What Does It Do?</h2>

<p>Imagine you’re trying to cook a meal that gives you all your daily vitamins and minerals. You open your fridge and pantry, stare at all the ingredients, and think “How much of each thing should I use to get the perfect balance?” That’s exactly what this program figures out for you!</p>

<h2 id="how-does-it-work">How Does It Work?</h2>

<p>The program uses something called a “genetic algorithm,” which is inspired by how nature evolves. Here’s a simple breakdown:</p>

<ol>
  <li>
    <p><strong>First Try</strong>: The program starts by randomly picking foods and amounts (like “100g of spinach, 50g of chicken, 200g of sweet potato”)</p>
  </li>
  <li>
    <p><strong>Scoring</strong>: It checks how good each meal plan is by comparing it to what your body needs daily (vitamins, proteins, etc.)</p>
  </li>
  <li><strong>Evolution</strong>: Just like in nature, it:
    <ul>
      <li>Keeps the best meal plans</li>
      <li>Combines them to make new ones (like mixing two recipes)</li>
      <li>Makes small random changes (like adding a bit more broccoli or less rice)</li>
    </ul>
  </li>
  <li><strong>Repeat</strong>: It does this hundreds of times until it finds really good combinations</li>
</ol>

<h2 id="what-makes-it-special">What Makes It Special?</h2>

<ul>
  <li><strong>Different Diets</strong>: It can create meal plans for:
    <ul>
      <li>Regular diets (all foods)</li>
      <li>Vegan diets</li>
      <li>Whole food plant-based diets</li>
    </ul>
  </li>
  <li>
    <p><strong>Smart Balancing</strong>: It’s not just about calories - it looks at over 30 different nutrients!</p>
  </li>
  <li><strong>Practical Results</strong>: You get actual recipes with gram-precise measurements of each ingredient</li>
</ul>

<h2 id="real-world-example">Real-World Example</h2>

<p>Let’s say it creates a meal with:</p>
<ul>
  <li>100g spinach</li>
  <li>150g sweet potato</li>
  <li>50g chickpeas</li>
  <li>30g almonds</li>
</ul>

<p>It will tell you exactly how many vitamins and minerals you’re getting and how close it is to ideal daily values. It’s like having a nutritionist and chef working together!</p>

<h2 id="why-did-i-make-this">Why Did I Make This?</h2>

<p>I was curious if a computer could help solve the complex puzzle of nutrition. Instead of just counting calories or following generic meal plans, this tool tries to find truly optimized combinations of real foods.</p>

<h2 id="want-to-try-it">Want to Try It?</h2>

<p>The program is open source and available on GitHub. While it might look complicated under the hood, the results are easy to understand - just click any recipe to see exactly what to eat and what nutrition you’ll get from it.</p>

<p><em>Note: While this is a fun and interesting experiment, always consult with healthcare professionals about your specific dietary needs!</em></p>

<p><a href="https://alexlaverty.github.io/optimize-nutrition/">Check out the live results here</a></p>

        </div>
      </article>
      
        <hr>
      
    
      <article class="post">
        <h2 class="post-title"><a class="nice-title" href="/health/fitness-tests">List of Fitness Tests</a></h2>
        <p class="post-date">February 22, 2025</p>
        <div class="post-content">
          <p>List of ways to test your fitness</p>

<p>Continuous Pushups</p>

<p>Sit Rise Test</p>

<p>Sit and Reach</p>

<p>One Leg Stand</p>

<p>Reaction Time</p>

<p>Waist-to-Height Ratio</p>

<p>Grip Strength</p>

<p>12 Minute Cooper test
https://nrpt.co.uk/training/tests/running/cooper.htm</p>

<h1 id="cardiovascular--endurance-tests">Cardiovascular &amp; Endurance Tests</h1>
<ul>
  <li>VO2 Max Test (Gold standard for cardiorespiratory fitness)
    <ul>
      <li>Metric: ml/kg/min of oxygen consumption</li>
      <li>Higher scores correlate with lower mortality risk</li>
    </ul>
  </li>
  <li>6-Minute Walk Test
    <ul>
      <li>Metric: Distance covered in 6 minutes</li>
      <li>Predicts functional decline and mortality in older adults</li>
    </ul>
  </li>
  <li>Stair Climb Test
    <ul>
      <li>Metric: Time to climb 4 flights of stairs</li>
      <li>Under 1 minute indicates good cardiac health</li>
    </ul>
  </li>
</ul>

<h1 id="strength--power-tests">Strength &amp; Power Tests</h1>
<ul>
  <li>Continuous Pushups
    <ul>
      <li>Metric: Number of proper form pushups</li>
      <li>Strong indicator of overall muscular endurance</li>
    </ul>
  </li>
  <li>Grip Strength
    <ul>
      <li>Metric: Force in kilograms using dynamometer</li>
      <li>Powerful predictor of mortality and disability</li>
    </ul>
  </li>
  <li>30-Second Chair Stand
    <ul>
      <li>Metric: Number of stands from sitting position</li>
      <li>Assesses lower body strength and endurance</li>
    </ul>
  </li>
  <li>Dead Hang Test
    <ul>
      <li>Metric: Time hanging from pull-up bar</li>
      <li>Indicates upper body strength and shoulder health</li>
    </ul>
  </li>
</ul>

<h1 id="balance--coordination-tests">Balance &amp; Coordination Tests</h1>
<ul>
  <li>One Leg Stand (Eyes Open and Closed)
    <ul>
      <li>Metric: Time maintaining balance</li>
      <li>Less than 20 seconds indicates fall risk</li>
    </ul>
  </li>
  <li>Tandem Walk Test
    <ul>
      <li>Metric: Walking heel-to-toe in straight line</li>
      <li>Assesses dynamic balance and coordination</li>
    </ul>
  </li>
  <li>Functional Reach Test
    <ul>
      <li>Metric: Distance reached forward while standing</li>
      <li>Predictor of fall risk</li>
    </ul>
  </li>
</ul>

<h1 id="flexibility--mobility-tests">Flexibility &amp; Mobility Tests</h1>
<ul>
  <li>Sit and Reach
    <ul>
      <li>Metric: Distance reached past toes</li>
      <li>Indicates hamstring and lower back flexibility</li>
    </ul>
  </li>
  <li>Shoulder Mobility Test
    <ul>
      <li>Metric: Ability to touch hands behind back</li>
      <li>Assesses upper body mobility</li>
    </ul>
  </li>
  <li>Thomas Test
    <ul>
      <li>Metric: Hip flexor flexibility</li>
      <li>Important for posture and back health</li>
    </ul>
  </li>
</ul>

<h1 id="functional-movement-tests">Functional Movement Tests</h1>
<ul>
  <li>Sit Rise Test (SRT)
    <ul>
      <li>Metric: Ability to sit and rise from floor using minimal support</li>
      <li>Each point lost correlates with mortality risk</li>
    </ul>
  </li>
  <li>Timed Up and Go (TUG)
    <ul>
      <li>Metric: Time to stand, walk 3m, return and sit</li>
      <li>Predicts fall risk and functional decline</li>
    </ul>
  </li>
  <li>Five Times Sit-to-Stand
    <ul>
      <li>Metric: Time to complete 5 chair stands</li>
      <li>Assesses lower body strength and power</li>
    </ul>
  </li>
</ul>

<h1 id="body-composition-metrics">Body Composition Metrics</h1>
<ul>
  <li>Waist-to-Height Ratio
    <ul>
      <li>Metric: Waist circumference divided by height</li>
      <li>Should be less than 0.5 for optimal health</li>
    </ul>
  </li>
  <li>Body Fat Percentage
    <ul>
      <li>Metric: Percentage of body mass that is fat</li>
      <li>Important indicator of metabolic health</li>
    </ul>
  </li>
  <li>Muscle Mass Index
    <ul>
      <li>Metric: Muscle mass relative to height</li>
      <li>Low scores indicate sarcopenia risk</li>
    </ul>
  </li>
</ul>

<h1 id="cognitive-physical-tests">Cognitive-Physical Tests</h1>
<ul>
  <li>Reaction Time Test
    <ul>
      <li>Metric: Time to respond to visual/auditory stimulus</li>
      <li>Indicates neurological health</li>
    </ul>
  </li>
  <li>Dual-Task Walking Test
    <ul>
      <li>Metric: Ability to walk while performing cognitive task</li>
      <li>Predicts cognitive decline and fall risk</li>
    </ul>
  </li>
</ul>

<h1 id="recovery-tests">Recovery Tests</h1>
<ul>
  <li>Heart Rate Recovery
    <ul>
      <li>Metric: Heart rate decrease 1 minute post-exercise</li>
      <li>Drop of 12+ beats indicates good fitness</li>
    </ul>
  </li>
  <li>Heart Rate Variability (HRV)
    <ul>
      <li>Metric: Variation in time between heartbeats</li>
      <li>Higher variability indicates better health</li>
    </ul>
  </li>
</ul>

<h1 id="performance-standards">Performance Standards</h1>
<p>Excellent scores by age group and gender should be provided for each test. Regular retesting (every 3-6 months) is recommended to track progress and identify areas needing attention.</p>

<h1 id="test-protocol-guidelines">Test Protocol Guidelines</h1>
<ol>
  <li>Perform tests in the morning when fresh</li>
  <li>Maintain consistent testing conditions</li>
  <li>Record detailed metrics for tracking</li>
  <li>Use standardized equipment when possible</li>
  <li>Have a spotter present for safety when needed</li>
</ol>

        </div>
      </article>
      
        <hr>
      
    
      <article class="post">
        <h2 class="post-title"><a class="nice-title" href="/health/cholesterol-study">Summary - Total cholesterol and all-cause mortality by sex and age</a></h2>
        <p class="post-date">February 09, 2025</p>
        <div class="post-content">
          <p>Key points from the text :</p>

<p>https://www.nature.com/articles/s41598-018-38461-y</p>

<p><img src="/assets/images/20250209/cholesterol.png" alt="alt text" /></p>

<h2 id="key-findings">Key Findings</h2>

<ul>
  <li>U-shaped relationship: The study found a U-shaped relationship between total cholesterol (TC) levels and mortality. This means that both very low and very high TC levels are associated with higher mortality rates.</li>
  <li>Optimal TC range: The study suggests that <strong>the optimal TC range for overall survival is between 210-249 mg/dL for most age groups</strong>, except for younger adults.</li>
  <li>Age and sex differences: The optimal TC range varies by age and sex. Younger adults (18-34 years) have lower optimal TC ranges, while older adults have higher optimal ranges.</li>
  <li>Low TC levels not always good: The study found that TC levels below 200 mg/dL may not necessarily be a sign of good health. In fact, low TC levels were associated with higher mortality rates in some age groups.</li>
</ul>

<h2 id="implications">Implications</h2>

<ul>
  <li>Cholesterol guidelines: The study suggests that current cholesterol guidelines, which recommend a TC range of &lt;200 mg/dL as desirable, may not be applicable to all populations.</li>
  <li>Diseases associated with low TC: The study highlights the need to identify and manage diseases associated with low TC levels, which may improve survival rates.</li>
  <li>Individualized approach: The study suggests that a more individualized approach to managing cholesterol levels may be necessary, taking into account age, sex, and other factors.</li>
</ul>

<h2 id="limitations">Limitations</h2>

<ul>
  <li>Medication use: The study did not account for the use of lipid-lowering medication, which may have affected the results.</li>
  <li>Limited generalizability: The study was conducted in a Korean population, and the results may not be generalizable to other ethnic groups.</li>
</ul>

        </div>
      </article>
      
    
    <div class="pagination">
  
    <span class="pagination-button disabled">← Previous</span>
  

  <span class="pagination-info">
    Page 1 of 11
  </span>

  
    <a class="pagination-button next" href="/blog/page2/">Next →</a>
  
</div>

  </div>

  <div class="sidebar">

    <a href="/">
        <center>
        <h1 class="site-title">Alex Laverty</h1>
        </center>
    </a>
    <div class="profile-image">
        <a href="/"><img src="/assets/images/alexlaverty.jpg" alt="Alex Laverty"></a>
    </div>
    <div class="social-icons">
        <a href="https://www.youtube.com/@alexlavertyau" class="youtube" target="_blank" title="YouTube">
            <i class="fab fa-youtube"></i>
        </a>
        <!-- <a href="https://linkedin.com/in/YourProfile" class="linkedin" target="_blank" title="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
        </a> -->
        <a href="https://github.com/alexlaverty" class="github" target="_blank" title="GitHub">
            <i class="fab fa-github"></i>
        </a>
    </div>
    <div class="search-container">
        <input type="text" id="search-input" placeholder="Search posts...">
        <ul id="search-results"></ul>
    </div>
    <nav class="site-nav">
        <h2>Projects</h2>
        <ul style="padding-top: 10px;">
            <li class="cats"><a href="https://alexlaverty.pythonanywhere.com/" target="_blank">FitCypher</a></li>
            <li class="cats"><a href="https://alexlaverty.github.io/optimize-nutrition/" target="_blank">Optimized Nutrition</a></li>
            <li class="cats"><a href="https://www.reddit.com/r/ManlyBeach/" target="_blank">ManlyBeach Subreddit</a></li>
            <li class="cats"><a href="https://github.com/alexlaverty?tab=repositories" target="_blank">Github Repos</a></li>
        </ul>

        <hr>
    </nav>
    <nav class="site-nav">
        <h2>Categories</h2>
        <ul style="padding-top: 10px;">
            
            

            

            

            
                
                
                
                <li class="cats">
                    <a href="/categories/manly-beach">
                        manly beach
                        <span>(11)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/fitcypher">
                        fitcypher
                        <span>(7)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/queenscliff">
                        queenscliff
                        <span>(4)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/health">
                        health
                        <span>(2)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/circular-quay">
                        circular quay
                        <span>(2)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/sunrise">
                        sunrise
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/shelly-beach">
                        shelly beach
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/optimising-nutrition">
                        optimising nutrition
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/manly-dam">
                        manly dam
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/manly-beach-corso">
                        manly beach corso
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/little-manly">
                        little manly
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/deadmans">
                        deadmans
                        <span>(1)</span>
                    </a>
                </li>
            
                
                
                
                <li class="cats">
                    <a href="/categories/darling-harbour">
                        darling harbour
                        <span>(1)</span>
                    </a>
                </li>
            
        </ul>
        <hr>
    </nav>
    <nav class="site-nav">
        <h2>Support</h2>
        <ul style="padding-top: 10px;">
            <li class="cats"><a href="https://www.buymeacoffee.com/alexlaverty" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" ></a></li>
        </ul>
        <hr>
    </nav>
</div>


  </main>

  <footer class="footer">
    <div class="footer-container">
      <p>&copy; 2025 Alex Laverty. All rights reserved.</p>
      <p>
        <a href="/">Home</a> |
        <!-- <a href="/about">About</a> -->
      </p>
    </div>
  </footer>

  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4P23WF01YZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4P23WF01YZ');
</script>

  

  <!-- <script src="/assets/js/main.js"></script> -->
  <script src="https://unpkg.com/lunr/lunr.js"></script>
  <script>
  let searchIndex;
  let searchData;

  // Initialize the search when the page loads
  window.addEventListener('DOMContentLoaded', function() {
      fetch('/search.json')
          .then(response => response.json())  // Only call json() once
          .then(data => {
              searchData = data;
              searchIndex = lunr(function() {
                  this.field('title', { boost: 10 });
                  this.field('content');
                  this.field('tags');
                  this.field('category');

                  data.forEach((doc, idx) => {
                      doc.id = idx;
                      this.add(doc);
                  });
              });
          })
          .catch(error => console.error('Error loading search index:', error));
  });

  // Handle search input
  document.getElementById('search-input').addEventListener('input', function(e) {
      const query = e.target.value;
      const resultsDiv = document.getElementById('search-results');
      resultsDiv.innerHTML = '';

      if (query === '' || !searchIndex) {  // Check if searchIndex exists
          return;
      }

      try {
          const results = searchIndex.search(query);

          if (results.length === 0) {
              resultsDiv.innerHTML = '<li>No results found</li>';
              return;
          }

          results.forEach(result => {
              const doc = searchData[result.ref];
              const li = document.createElement('li');
              li.innerHTML = `<a href="${doc.url}">${doc.title}</a>`;
              resultsDiv.appendChild(li);
          });
      } catch (error) {
          console.error('Search error:', error);
      }
  });
  </script>
</body>
</html>